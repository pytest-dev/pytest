# syntax=docker/dockerfile:1
FROM python:3.11-slim

WORKDIR /app
COPY . /app
COPY docker/cyclic_deps /tmp/cyclic_deps

# Install the mutually recursive sample packages without honoring their dependencies.
RUN pip install --no-cache-dir --no-deps /tmp/cyclic_deps/alpha \
    && pip install --no-cache-dir --no-deps /tmp/cyclic_deps/beta \
    && pip install --no-cache-dir -e .

ENV PYTHONPATH="/app"
CMD ["python", "-c", "from alpha_cyclic import make_alpha; print(make_alpha())"]
