[run]
include =
  src/*
  testing/*
  */lib/python*/site-packages/_pytest/*
  */lib/python*/site-packages/pytest.py
  */pypy*/site-packages/_pytest/*
  */pypy*/site-packages/pytest.py
  *\Lib\site-packages\_pytest\*
  *\Lib\site-packages\pytest.py
parallel = 1
branch = 1
# The sysmon core (default since Python 3.14) is much slower.
# Perhaps: https://github.com/coveragepy/coveragepy/issues/2082
core = ctrace

[paths]
source = src/
  */lib/python*/site-packages/
  */pypy*/site-packages/
  *\Lib\site-packages\

[report]
skip_covered = True
show_missing = True
exclude_lines =
    \#\s*pragma: no cover
    ^\s*raise NotImplementedError\b
    ^\s*return NotImplemented\b
    ^\s*assert False(,|$)
    ^\s*case unreachable:
    ^\s*assert_never\(

    ^\s*if TYPE_CHECKING:
    ^\s*@overload( |$)
    ^\s*def .+: \.\.\.$

    ^\s*@pytest\.mark\.xfail
