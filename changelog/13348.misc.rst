Clean up type hints on :attr:`pytest.TestReport.when` and add a test.
